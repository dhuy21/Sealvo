<link rel="stylesheet" href="/css/games/flashMatch.css">
<div class="game-container">
    <div class="game-header">
        <h1>{{gameTitle}}</h1>
        <p class="game-description">{{gameDescription}}</p>
    </div>
    
    {{#if errorMessage}}
    <div class="error-box">
        <i class="fas fa-exclamation-triangle"></i>
        <p>{{errorMessage}}</p>
        <a href="/monVocabs/add" class="btn add-words-btn">Ajouter des mots</a>
    </div>
    {{else}}
    
    <div class="game-stats">
        <div class="stat-box">
            <span class="stat-label">Votre meilleur score</span>
            <span class="stat-value">{{#if highScore}}{{highScore.score}}{{else}}0{{/if}}</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">Mots disponibles</span>
            <span class="stat-value">{{wordCount}}</span>
        </div>
    </div>
    
    <div class="game-area">
        <div id="game-screen" class="game-screen">
            <div class="pre-game-screen active">
                <h2>Règles du jeu</h2>
                <ul class="rules-list">
                    <li>Associez chaque mot avec sa définition</li>
                    <li>Moins vous faites de tentatives, plus votre score sera élevé</li>
                    <li>Le temps est également pris en compte dans le calcul du score</li>
                    <li>Trouvez toutes les paires pour terminer le jeu</li>
                </ul>
                <div class="difficulty-selector">
                    <h3>Choisissez la difficulté</h3>
                    <div class="difficulty-options">
                        <button class="difficulty-btn active" data-difficulty="easy" data-pairs="4">
                            <i class="fas fa-star"></i>
                            <span>Facile</span>
                            <small>4 paires</small>
                        </button>
                        <button class="difficulty-btn" data-difficulty="medium" data-pairs="6">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <span>Moyen</span>
                            <small>6 paires</small>
                        </button>
                        <button class="difficulty-btn" data-difficulty="hard" data-pairs="8">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <span>Difficile</span>
                            <small>8 paires</small>
                        </button>
                    </div>
                </div>
                <button id="start-game" class="start-btn">Commencer à jouer</button>
            </div>
            
            <div class="active-game-screen">
                <div class="game-info">
                    <div class="moves-display">
                        <span class="moves-label">Coups</span>
                        <span id="moves-count" class="moves-value">0</span>
                    </div>
                    <div class="timer-display">
                        <span class="timer-label">Temps</span>
                        <span id="timer" class="timer-value">00:00</span>
                    </div>
                    <div class="pairs-display">
                        <span class="pairs-label">Paires</span>
                        <span id="pairs-count" class="pairs-value">0/8</span>
                    </div>
                </div>
                
                <div id="game-board" class="game-board">
                    <!-- Les cartes seront générées dynamiquement ici -->
                </div>
            </div>
            
            <div class="post-game-screen">
                <h2>Partie terminée !</h2>
                <div class="final-score-container">
                    <span class="final-score-label">Score final</span>
                    <span id="final-score" class="final-score">0</span>
                </div>
                
                <div class="game-summary">
                    <div class="summary-item">
                        <span class="summary-label">Temps</span>
                        <span id="final-time" class="summary-value">00:00</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Coups</span>
                        <span id="final-moves" class="summary-value">0</span>
                    </div>
                </div>
                
                <div id="high-score-message" class="high-score-message"></div>
                
                <div class="action-buttons">
                    <button id="play-again" class="play-again-btn">Rejouer</button>
                    <a href="/games" class="back-btn">Retour aux jeux</a>
                </div>
            </div>
        </div>
        
        {{#if leaderboard.length}}
        <div class="leaderboard">
            <h3>Classement</h3>
            <div class="leaderboard-list">
                {{#each leaderboard}}
                <div class="leaderboard-item">
                    <span class="leaderboard-rank">{{@index}}</span>
                    <span class="leaderboard-user">{{this.username}}</span>
                    <span class="leaderboard-score">{{this.score}}</span>
                </div>
                {{/each}}
            </div>
            <a href="/games/leaderboard/flashMatch" class="view-all-btn">Voir tout le classement</a>
        </div>
        {{/if}}
    </div>
    {{/if}}
    
    <div class="game-footer">
        <a href="/games" class="btn back-btn">
            <i class="fas fa-arrow-left"></i> Retour aux jeux
        </a>
        <a href="/monVocabs/learn" class="btn learn-btn">
            <i class="fas fa-book"></i> Apprendre
        </a>
    </div>
</div>