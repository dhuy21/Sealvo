
<link rel="stylesheet" href="/css/learnVocabs.css">
<div class="learn-container">
  <h1 class="learn-title">Apprendre mon vocabulaire</h1>
  
  {{#if error}}
  <div class="alert alert-error">
    {{error}}
  </div>
  {{/if}}
  
  {{#if words.length}}
    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-book"></i></div>
        <div class="stat-content">
          <h3>{{words.length}}</h3>
          <p>Mots disponibles</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
        <div class="stat-content">
          <h3 id="known-count">0</h3>
          <p>Mots maîtrisés</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-stopwatch"></i></div>
        <div class="stat-content">
          <h3 id="session-time">00:00</h3>
          <p>Temps de session</p>
        </div>
      </div>
    </div>
    
    <div class="flashcard-controls">
      <div class="flashcard-filters">
        <h3>Niveaux</h3>
        <div class="filter-options">
          <div class="filter-row">
            <label class="filter-label">
              <input type="checkbox" id="levelx" checked>
              <span class="custom-checkbox"></span>
              Niveau x
            </label>

            <label class="filter-label">
              <input type="checkbox" id="level0" checked>
              <span class="custom-checkbox"></span>
              Niveau 0
            </label>
          </div>
          <div class="filter-row">  
            <label class="filter-label">
              <input type="checkbox" id="level1" checked>
              <span class="custom-checkbox"></span>
              Niveau 1
            </label>
            <label class="filter-label">
              <input type="checkbox" id="level2" checked>
              <span class="custom-checkbox"></span>
              Niveau 2
            </label>
          </div>
        </div>
      </div>
      <div class="mode-selector">
        <h3>Mode d'apprentissage</h3>
        <div class="mode-options">
          <label class="mode-label">
            <input type="radio" name="mode" value="word-to-meaning" checked>
            <span class="custom-radio"></span>
            Mot → Signification
          </label>
          <label class="mode-label">
            <input type="radio" name="mode" value="meaning-to-word">
            <span class="custom-radio"></span>
            Signification → Mot
          </label>
        </div>
      </div>
    </div>
    
    <div class="flashcard-container">
      <div class="card-count">
        <span id="current-card">1</span> / <span id="total-cards">{{words.length}}</span>
      </div>
      
      <div class="flashcard" id="flashcard">
        <div class="flashcard-inner">
          <div class="flashcard-front">
            <span class="card-type">{{words.[0].type}}</span>
            <h2 class="card-content">{{words.[0].word}}</h2>
            <div class="hint-container">
              <button id="hint-button" class="hint-btn"><i class="fas fa-lightbulb"></i> Indice</button>
              <p id="hint-text" class="hint-text"></p>
            </div>
            <p class="card-prompt">Cliquez pour voir la traduction</p>
          </div>
          <div class="flashcard-back">
            <span class="card-type">{{words.[0].type}}</span>
            <h2 class="card-content">{{words.[0].meaning}}</h2>
            <div class="card-details">
              <p><strong>Exemple:</strong> <span class="example-text">{{words.[0].example}}</span></p>
              {{#if words.[0].pronunciation}}
                <p><strong>Prononciation:</strong> <span class="pronunciation-text">{{words.[0].pronunciation}}</span></p>
                <button class="pronunciation-btn" data-text="{{words.[0].word}}">
                  <i class="fas fa-volume-up"></i> Écouter
                </button>
              {{/if}}
              {{#if words.[0].synonyms}}
                <p><strong>Synonymes:</strong> {{words.[0].synonyms}}</p>
              {{/if}}
              {{#if words.[0].antonyms}}
                <p><strong>Antonymes:</strong> {{words.[0].antonyms}}</p>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
      
      <div class="flashcard-navigation">
        <button id="prev-card" class="nav-btn" disabled>
          <i class="fas fa-chevron-left"></i> Précédent
        </button>
        
        <div class="knowledge-buttons">
          <button class="knowledge-btn" data-level="0">
            <i class="fas fa-times"></i> Je ne sais pas
          </button>
          <button class="knowledge-btn" data-level="1">
            <i class="fas fa-question"></i> Incertain
          </button>
          <button class="knowledge-btn" data-level="2">
            <i class="fas fa-check"></i> Je sais
          </button>
        </div>
        
        <button id="next-card" class="nav-btn">
          Suivant <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
    
    <div class="progress-container">
      <div class="progress-header">
        <h3>Votre progression</h3>
        <span id="progress-text">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress" id="progress-bar" style="width: 0%"></div>
      </div>
      <div class="progress-stats">
        <div class="progress-stat">
          <span class="stat-icon red"><i class="fas fa-times"></i></span>
          <span id="not-known-count">0</span>
        </div>
        <div class="progress-stat">
          <span class="stat-icon orange"><i class="fas fa-question"></i></span>
          <span id="uncertain-count">0</span>
        </div>
        <div class="progress-stat">
          <span class="stat-icon green"><i class="fas fa-check"></i></span>
          <span id="mastered-count">0</span>
        </div>
      </div>
    </div>
    
    <div class="flashcard-actions">
      <button id="shuffle-cards" class="action-btn">
        <i class="fas fa-random"></i> Mélanger
      </button>
      <button id="reset-progress" class="action-btn">
        <i class="fas fa-redo"></i> Recommencer
      </button>
      <button id="save-progress" class="action-btn">
        <i class="fas fa-save"></i> Sauvegarder
      </button>
      <a href="/games" class="action-btn game-btn">
        <i class="fas fa-gamepad"></i> Jouer pour apprendre
      </a>
    </div>
    
  {{else}}
    <div class="no-words">
      <i class="fas fa-book"></i>
      <h3>Aucun mot dans votre vocabulaire</h3>
      <p>Commencez à ajouter des mots pour pouvoir les apprendre.</p>
      <a href="/monVocabs/add" class="btn">Ajouter votre premier mot</a>
    </div>
  {{/if}}
  
  <div id="words-data" data-words="{{json words}}"></div>

  <script>
    // Définir la variable globale pour le script externe
    window.vocabularyWords = {{{json words}}};
  </script>

  <div class="home-cta">
    <a href="/monVocabs" class="btn back-btn">
      <i class="fas fa-arrow-left"></i> Retour à mon vocabulaire
    </a>
  </div>
</div>
<script src="/js/learnVocabs.js"></script>


