<link rel="stylesheet" href="/css/myPackages.css">
<div class="packages-container">
  <!-- Floating decorative icons -->
  <i class="fas fa-box-open floating-icons float-icon-1"></i>
  <i class="fas fa-layer-group floating-icons float-icon-2"></i>
  <i class="fas fa-bookmark floating-icons float-icon-3"></i>
  
  <!-- Header -->
  <div class="packages-header fade-in">
    <h1><i class="fas fa-box-open"></i> Mes Packages</h1>
    <p class="header-subtitle">Organisez votre vocabulaire en packages thématiques</p>
  </div>

  <!-- Alerts -->
  {{#if error}}
  <div class="alert alert-error fade-in">
    <i class="fas fa-exclamation-triangle"></i>
    {{error}}
  </div>
  {{/if}}

  {{#if success}}
  <div class="alert alert-success fade-in">
    <i class="fas fa-check-circle"></i>
    {{success}}
  </div>
  {{/if}}

  <!-- Action Bar -->
  <div class="action-bar fade-in">
    <div class="action-stats">
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-box"></i>
        </div>
        <div class="stat-content">
          <h3>{{packages.length}}</h3>
          <p>Packages</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
          <h3 id="public-count">0</h3>
          <p>Publics</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-lock"></i>
        </div>
        <div class="stat-content">
          <h3 id="private-count">0</h3>
          <p>Privés</p>
        </div>
      </div>
    </div>
    
    <button class="btn btn-primary create-package-btn" id="createPackageBtn">
      <i class="fas fa-plus"></i> Créer un package
    </button>
  </div>

  <!-- Search Bar -->
  <div class="search-container fade-in">
    <div class="search-form">
      <div class="input-group">
        <input 
          type="text" 
          id="search-input"
          placeholder="Rechercher un package..."
          class="search-input"
        >
        <button type="button" id="search-btn" class="search-btn">
          <i class="fas fa-search"></i>
        </button>
        <button type="button" id="clear-search-btn" class="clear-search-btn" style="display: none;">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Filter Options -->
  <div class="filter-container fade-in">
    <div class="filter-tabs">
      <button class="filter-tab active" data-filter="all">
        <i class="fas fa-list"></i> Tous
      </button>
      <button class="filter-tab" data-filter="private">
        <i class="fas fa-lock"></i> Privés
      </button>
      <button class="filter-tab" data-filter="public">
        <i class="fas fa-globe"></i> Publics
      </button>
      <button class="filter-tab" data-filter="protected">
        <i class="fas fa-shield-alt"></i> Protégés
      </button>
    </div>
  </div>

  <!-- Packages Grid -->
  <div class="packages-grid fade-in" id="packagesGrid">
    {{#if packages.length}}
      {{#each packages}}
        <div class="package-card" data-package-id="{{this.package_id}}" data-mode="{{this.mode}}">
          <div class="package-card-header">
            <div class="package-mode-badge mode-{{this.mode}}">
              {{#if (eq this.mode 'private')}}
                <i class="fas fa-lock"></i> Privé
              {{else if (eq this.mode 'public')}}
                <i class="fas fa-globe"></i> Public
              {{else if (eq this.mode 'protected')}}
                <i class="fas fa-shield-alt"></i> Protégé
              {{/if}}
            </div>
            <div class="package-actions">
              <button class="action-btn edit-btn" data-package-id="{{this.package_id}}" title="Modifier">
                <i class="fas fa-edit"></i>
              </button>
              <button class="action-btn delete-btn" data-package-id="{{this.package_id}}" title="Supprimer">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          
          <div class="package-card-body">
            <div class="package-icon">
              <i class="fas fa-box-open"></i>
            </div>
            <h3 class="package-name">{{this.package_name}}</h3>
            <p class="package-description">{{this.package_description}}</p>
          </div>
          
          <div class="package-card-footer">
            <button class="btn btn-primary view-package-btn" data-package-id="{{this.package_id}}">
              <i class="fas fa-eye"></i> Voir le package
            </button>
            <button class="btn btn-secondary learn-package-btn" data-package-id="{{this.package_id}}">
              <i class="fas fa-graduation-cap"></i> Apprendre
            </button>
          </div>
        </div>
      {{/each}}
    {{else}}
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-box-open"></i>
        </div>
        <h3>Aucun package trouvé</h3>
        <p>Créez votre premier package pour organiser votre vocabulaire</p>
        <button class="btn btn-primary create-first-package-btn">
          <i class="fas fa-plus"></i> Créer mon premier package
        </button>
      </div>
    {{/if}}
  </div>

  <!-- No Search Results -->
  <div class="no-results" id="noResults" style="display: none;">
    <div class="empty-icon">
      <i class="fas fa-search"></i>
    </div>
    <h3>Aucun résultat trouvé</h3>
    <p>Essayez de modifier votre recherche ou vos filtres</p>
  </div>
</div>

<!-- Create/Edit Package Modal -->
<div class="modal-overlay" id="packageModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalTitle">
        <i class="fas fa-plus-circle"></i> Créer un package
      </h3>
      <button class="modal-close" id="closeModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <form id="packageForm">
      <div class="modal-body">
        <div class="form-group">
          <label for="packageName">
            <i class="fas fa-tag"></i> Nom du package
          </label>
          <input 
            type="text" 
            id="packageName" 
            name="package_name" 
            class="form-input"
            placeholder="Ex: Vocabulaire Business"
            required
          >
        </div>
        
        <div class="form-group">
          <label for="packageDescription">
            <i class="fas fa-align-left"></i> Description
          </label>
          <textarea 
            id="packageDescription" 
            name="package_description" 
            class="form-textarea"
            placeholder="Décrivez brièvement le contenu de ce package..."
            rows="4"
            required
          ></textarea>
        </div>
        
        <div class="form-group">
          <label for="packageMode">
            <i class="fas fa-cog"></i> Mode de visibilité
          </label>
          <select id="packageMode" name="mode" class="form-select">
            <option value="private">
              <i class="fas fa-lock"></i> Privé - Visible uniquement par vous
            </option>
            <option value="public">
              <i class="fas fa-globe"></i> Public - Visible par tous
            </option>
            <option value="protected">
              <i class="fas fa-shield-alt"></i> Protégé - Visible mais non modifiable
            </option>
          </select>
        </div>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelBtn">
          <i class="fas fa-times"></i> Annuler
        </button>
        <button type="submit" class="btn btn-primary" id="submitBtn">
          <i class="fas fa-save"></i> Créer
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" id="deleteModal">
  <div class="modal-content modal-danger">
    <div class="modal-header">
      <h3>
        <i class="fas fa-exclamation-triangle"></i> Confirmer la suppression
      </h3>
      <button class="modal-close" id="closeDeleteModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-body">
      <p>Êtes-vous sûr de vouloir supprimer ce package ?</p>
      <p class="warning-text">
        <i class="fas fa-warning"></i> Cette action est irréversible et supprimera tous les mots associés à ce package.
      </p>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">
        <i class="fas fa-times"></i> Annuler
      </button>
      <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
        <i class="fas fa-trash"></i> Supprimer
      </button>
    </div>
  </div>
</div>

<script src="/js/myPackages.js"></script>
